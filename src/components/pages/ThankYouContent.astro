---
/**
 * ThankYouContent - Reusable thank you page content with i18n support
 */
import { t, type Locale } from '@/i18n/ui';
import { CONTACT } from '@/lib/constants';

interface Props {
  locale: Locale;
  leadId?: string;
}

const { locale, leadId = '' } = Astro.props;

// Localized links
const homeLink = locale === 'hu' ? '/' : `/${locale}`;
const productsLink = locale === 'hu' ? '/termekek' : `/${locale}/termekek`;
---

<section class="py-16 md:py-24">
  <div class="container mx-auto px-4 max-w-2xl text-center">
    <!-- Success icon -->
    <div class="mb-8">
      <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100">
        <svg class="w-10 h-10 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
      </div>
    </div>

    <!-- Heading -->
    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
      {t(locale, 'thankYou.title')}
    </h1>

    <p class="text-lg text-gray-600 mb-8">
      {t(locale, 'thankYou.message')}
    </p>

    <!-- Lead ID reference -->
    {leadId && (
      <div class="inline-block bg-gray-100 rounded-lg px-4 py-2 mb-8">
        <p class="text-sm text-gray-500">
          {t(locale, 'thankYou.referenceNumber')} <span class="font-mono font-semibold text-gray-700">{leadId}</span>
        </p>
      </div>
    )}

    <!-- What happens next -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 mb-8 text-left">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">{t(locale, 'thankYou.whatHappensNext')}</h2>
      <ol class="space-y-4">
        <li class="flex gap-4">
          <span class="flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 text-primary-700 font-semibold flex items-center justify-center text-sm">1</span>
          <div>
            <p class="font-medium text-gray-900">{t(locale, 'thankYou.step1Title')}</p>
            <p class="text-sm text-gray-600">{t(locale, 'thankYou.step1Desc')}</p>
          </div>
        </li>
        <li class="flex gap-4">
          <span class="flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 text-primary-700 font-semibold flex items-center justify-center text-sm">2</span>
          <div>
            <p class="font-medium text-gray-900">{t(locale, 'thankYou.step2Title')}</p>
            <p class="text-sm text-gray-600">{t(locale, 'thankYou.step2Desc')}</p>
          </div>
        </li>
        <li class="flex gap-4">
          <span class="flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 text-primary-700 font-semibold flex items-center justify-center text-sm">3</span>
          <div>
            <p class="font-medium text-gray-900">{t(locale, 'thankYou.step3Title')}</p>
            <p class="text-sm text-gray-600">{t(locale, 'thankYou.step3Desc')}</p>
          </div>
        </li>
      </ol>
    </div>

    <!-- Contact info -->
    <div class="bg-primary-50 rounded-xl p-6 mb-8">
      <p class="text-gray-700 mb-3">
        {t(locale, 'thankYou.urgentQuestion')}
      </p>
      <a
        href={`tel:${CONTACT.phone}`}
        class="inline-flex items-center gap-2 text-2xl font-bold text-primary-700 hover:text-primary-800 transition-colors"
      >
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
        </svg>
        {CONTACT.phoneDisplay}
      </a>
    </div>

    <!-- Navigation -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <a
        href={homeLink}
        class="inline-flex items-center justify-center px-6 py-3 font-semibold rounded-lg bg-primary-600 text-white hover:bg-primary-700 transition-colors"
      >
        {t(locale, 'thankYou.backToHome')}
      </a>
      <a
        href={productsLink}
        class="inline-flex items-center justify-center px-6 py-3 font-semibold rounded-lg border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
      >
        {t(locale, 'thankYou.browseProducts')}
      </a>
    </div>
  </div>
</section>

<!-- Conversion tracking -->
<script define:vars={{ leadId }}>
  // Track conversion in Google Analytics
  if (typeof gtag === 'function' && leadId) {
    gtag('event', 'conversion', {
      send_to: 'AW-CONVERSION_ID/CONVERSION_LABEL', // TODO: Replace with actual conversion ID
      value: 1.0,
      currency: 'HUF',
      transaction_id: leadId,
    });
  }

  // Facebook Pixel (if configured)
  if (typeof fbq === 'function') {
    fbq('track', 'Lead', {
      content_name: 'Contact Form',
      lead_id: leadId,
    });
  }
</script>
